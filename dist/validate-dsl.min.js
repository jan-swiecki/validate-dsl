!function(e){e.module("validateDsl.config",[]).value("validateDsl.config",{debug:!0}),e.module("validateDsl.services",[]),e.module("validateDsl",["validateDsl.config","validateDsl.services"])}(angular),angular.module("validateDsl").service("_",function(){return _}),angular.module("validateDsl").service("esprima",function(){return console.log("esprima-->",esprima),esprima}),angular.module("validateDsl").service("moment",function(){return moment}),angular.module("validateDsl").service("RewireScope",function(){var e={};return e.getSimpleWrapper=function(e){return"(function() { return "+e.toString()+"})()"},e}),angular.module("validateDsl").service("Rule",function(){function e(e,r){function t(e,r,t,n){this.thenRule=e,this.otherwiseRule=r,this.errorMessage=t,this.errorHandler=n}var n,i=!1;return n="function"!=typeof e?function(){return e}:e,t.prototype.then=function(e){return new t(e,this.otherwiseRule,this.errorMessage,this.errorHandler)},t.prototype.otherwise=function(e){return new t(this.thenRule,e,this.errorMessage,this.errorHandler)},t.prototype.onError=function(e){return new t(this.thenRule,this.otherwiseRule,this.errorMessage,e)},t.prototype.withErrorMessage=function(e){return this.errorMessage=e,this},t.prototype.evaluate=function(e){var r=n(e);i&&console.log("[Rule] checkFn("+e+") --> "+r);var t;return r?this.thenRule&&(t=this.thenRule):this.otherwiseRule&&(t=this.otherwiseRule),t&&(r=t.evaluate(e),r||(this.errorMessage?this.errorMessage+=", "+t.errorMessage:this.errorMessage=t.errorMessage)),r||"function"!=typeof this.errorHandler||this.errorHandler(this.errorMessage),r},(new t).withErrorMessage(r)}return e}),angular.module("validateDsl").service("Rules",function(e,r,t){function n(e,r){return r(e)}function i(e){return e.match(/^[0-9]*\.?[0-9]*$/,e)}function o(e,r){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(void 0,t)||r.apply(void 0,t)}}var s={};return s.isUndefined=t(r.isUndefined),s.isNullOrUndefined=t(o(r.isUndefined,r.isNull)),s.isString=t(r.isString),s.not=t(function(e){return!e}),s.True=t(!0),s.False=function(e){return t(!1,e)},s.isSimpleDate=t(function(e){n(e.split("-"),function(e){return r.all([3===e.length,e[0].match(/^[0-9]{4}$/),i(e[1]),2==e[1].length,n(parseInt(e[1],10),function(e){return 12>=e&&e>=1}),"0"===e[1][0]||"1"===e[1][0],i(e[2]),2==e[2].length,n(parseInt(e[2],10),function(e){return 31>=e&&e>=1}),-1!==["0","1","2","3"].indexOf(e[2][0])])})}),s.isNumber=t(i),s.isDate=t(function(e){return r.isDate(e)&&!r.isNaN(e.getTime())}),s.getNullRule=function(e,r){return t(e).then(s.isNullOrUndefined.then(s.True).otherwise(r)).otherwise(s.isNullOrUndefined.then(s.False("$0 is null")).otherwise(r))},s}),angular.module("validateDsl").service("ValidateDSL",function($q,_,Rule,Rules,RewireScope){return function(contextCallback,context){return"function"==typeof contextCallback?(context=context||{},contextCallback=eval(RewireScope.getSimpleWrapper(contextCallback)),contextCallback()):void 0}});